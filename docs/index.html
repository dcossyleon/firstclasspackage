<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>How to build a package for your classroom</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<head>
	<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=10.0,initial-scale=1.0">
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-135221736-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-135221736-1');
	</script>
</head>
<link href="https://fonts.googleapis.com/css?family=Abril+Fatface&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,200i,300,300i,400,400i,600,600i,700,700i,900,900i" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Arvo|Crimson+Text|Lora|PT+Serif&display=swap" rel="stylesheet">
<link href="style_How_to_package.css" rel="stylesheet">

  <div class="image-descript">
		<img class="big_image" src="firstclass.jpg">
		<div class="image-text">
		  <div class= "image-text-grey-box">
  			<div class="lil-image-text"> Using RStudio as an educator:</div>
  			<div class="big-image-text"><strong>Building a package</strong></div>
  		</div>
		</div>
  </div>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style_How_to_package.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->



<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">firstclasspackage</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Desiree's long version</a>
</li>
<li>
  <a href="01_concise.html">Concise Tutorial</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">How to build a package for your classroom</h1>

</div>


<div id="is-this-tutorial-for-you" class="section level1">
<h1>Is this tutorial for you?</h1>
<p><strong>Pre-requisites:</strong></p>
<ol style="list-style-type: decimal">
<li>You have a github account</li>
<li>You are comfortable with the basics of using R and RStudio</li>
<li>You understand how R projects work</li>
<li>You understand the difference between a regular R script and an R Markdown document</li>
</ol>
<p>[^ refine with j hester’s descriptions from talk]</p>
<p><strong>What you’ll learn:</strong></p>
<ol style="list-style-type: decimal">
<li>How to make a package that your students can download and install from github</li>
<li>How to include a raw data set in your package</li>
<li>How to create a custom template in your package that your learners can use for worksheets, training materials, assigment templates, etc</li>
<li>How to give your students access to a custom interactive tutorial/lesson</li>
</ol>
<p><br></p>
</div>
<div id="why-make-a-package" class="section level1">
<h1>Why make a package?</h1>
<center>
<img src="Box.jpg" width="600" />
</center>
<p><br></p>
<p>As an educator you can use a package to easily deliver the contents of your lesson/ teaching material/ data to an audience. Your package doesn’t have to be on CRAN, and it doesn’t have to contain functions (but it can if you want!). Packages can be used creatively so that you can give your students custom data sets to work with, R Markdown “worksheets” that they can fill in or use as templates for completing exercises. You can also have students run LearnR tutorials with a package. These are interactive R Markdown docs that use Shiny.</p>
</div>
<div id="so-you-wanna-make-a-package" class="section level1">
<h1>So you wanna make a package?</h1>
<p><br></p>
<div id="getting-started" class="section level2">
<h2>Getting started</h2>
<p>Need to install and load the following:</p>
<pre class="r"><code>#install.packages(c(&quot;devtools&quot;, &quot;roxygen2&quot;, &quot;usethis&quot;))
library(devtools)
library(roxygen2)
library(usethis)</code></pre>
<p><br></p>
<div id="youre-not-on-your-own" class="section level3">
<h3>You’re not on your own</h3>
<p>Making a package involves creating an R project with several specific folders containing scripts and other intermediate files. We could create these folders manually, but we don’t have to! There are some helper functions that streamline this folder-creation and organization process for us to make sure these files end up in the right place. (I know because I tried not using the helper functions, and my files got all sorts of messed up.)</p>
<div class="alert alert-note">
<blockquote>
<p><strong>A little more info:</strong> What are these for? <code>devtools</code> is used to _______ &amp; ________. The <code>roxygen2</code> package is going to makes sure that your descriptions for each part of your package are formatted properly. The <code>usethis</code> package automates the creation of folders and intermediate files so that you don’t have to accidentally put stuff in the wrong place.</p>
</blockquote>
</div>
<p><br></p>
</div>
<div id="a-little-bit-more-setup" class="section level3">
<h3>A little bit more setup</h3>
<p>To make the <code>usethis</code> package maximally helpful to us during our package creation, we should complete a few more setup steps. Below we summarize the more thorough <code>usethis</code> instructions found <a href="https://usethis.r-lib.org/articles/articles/usethis-setup.html">here</a>:</p>
<p><br> <strong>Modify your .Rprofile:</strong> Here, we’ll (1) tell R to make <code>devtools</code> available anytime you’re doing interactive work [IS THIS RIGHT?] and (2) give R some information about how to automatically fill in fields that require default information from us (i.e. our name, email, etc.)</p>
<ul>
<li>Call <code>usethis::use_devtools()</code> and see that a <code>.Rprofile</code> script pops up.</li>
<li>Paste the following into your <code>.Rprofile</code> script:</li>
</ul>
<pre class="r"><code>    if (interactive()) {
      suppressMessages(require(devtools))
    }</code></pre>
<ul>
<li>Save and re-start your R session</li>
<li>Call <code>usethis::edit_r_profile()</code> to re-open your <code>.Rprofile</code></li>
<li><p>Add the following to your <code>.Rprofile</code> script and modify any of the options to include your information. (<a href="https://orcid.org/">ORCID</a> is another form of digital identification, and you can register for a free ID number on their site).</p>
<pre class="r"><code>options(
  usethis.full_name = &quot;Jane Doe&quot;,
  usethis.description = list(
    `Authors@R` = &#39;person(&quot;Jane&quot;, &quot;Doe&quot;, email = &quot;jane@example.com&quot;, role = c(&quot;aut&quot;, &quot;cre&quot;), 
    comment = c(ORCID = &quot;YOUR-ORCID-ID&quot;))&#39;, 
    License = &quot;MIT + file LICENSE&quot;,
    Version = &quot;0.0.0.9000&quot;
  ),
  usethis.protocol  = &quot;ssh&quot;
)</code></pre></li>
<li><p>Save and re-start your R session</p></li>
</ul>
<p><br> <strong>Get and store a GitHub personal access token</strong> [Rephrase] In the steps below we generate a personal access token (PAT, i.e. a very long ID code) that <code>usethis</code> will need to communicate with github [???]. We will store this long ID in a file <code>.Renviron</code> as a variable called <code>GITHUB_PAT</code>. See below:</p>
<ul>
<li><code>usethis::browse_github_token()</code>: Generates a token. <em>Save this token somewhere.</em> Not a huge deal if you lose this, but you will have to generate and save a new one if you do.</li>
<li><code>usethis::edit_r_environ()</code>: Opens <code>.Renviron</code></li>
<li>Paste <code>GITHUB_PAT =</code> followed by your PAT into <code>.Renviron</code></li>
<li>Enter a new line after this variable. (Common mistake is to omit this.)</li>
<li>Save and restart R and confirm that your PAT is now available with <code>git_sitrep()</code></li>
</ul>
<p><br></p>
</div>
<div id="create-and-name-your-minimally-viable-package" class="section level3">
<h3>Create and name your minimally viable package</h3>
<p>This is going to make the github repository and create an active project, all in the following lines of code. Whatever you name your directory is what your package will be named. Replace <code>your-package-name</code> with whatever you’d like to call your package.</p>
<pre class="r"><code>create_package(&quot;~/Desktop/your-package-name&quot;)
use_git()
use_github()</code></pre>
<p>This will output a lot of stuff on your console, creating folders and files where they need to be created.</p>
<p>[replace SCREENSHOT OF WHAT THIS LOOKS LIKE] <img src="https://www.hvitfeldt.me/img/blog/usethis-workflow-for-package-development/Screen%20Shot%202018-09-02%20at%2016.56.20.png" /></p>
<p><br></p>
</div>
<div id="what-are-these-folders" class="section level3">
<h3>What are these folders?</h3>
<p>[high-level overview of what each of these folders will house?, annotation?]</p>
<ul>
<li><strong>Edit the DESCRIPTION file</strong>: Make sure that package metadata (e.g. the author, title, and description fields are correct).</li>
<li><strong>License the package</strong>: [OPTIONAL?] How can others who find your material use it? You can run one of the following commands to fill in this field appropriately:
<ul>
<li><code>use_mit_license()</code></li>
<li><code>use_gpl3_license()</code></li>
<li><code>use_apl2_license()</code></li>
<li><code>use_cc0_license()</code></li>
</ul></li>
<li><strong>Create a <code>README.Rmd</code>:</strong> You can modify and knit this file like any other README</li>
<li><strong>R/</strong>: Contains R scripts for any code you create</li>
<li><strong>man/</strong>: Contains documentation</li>
<li>Everything else you don’t have to worry about</li>
</ul>
<p><br></p>
</div>
<div id="build-and-install" class="section level3">
<h3>Build and install</h3>
<p>Check that your new package works by clicking on <code>Install and Build</code> under the Build tab.</p>
</div>
</div>
</div>
<div id="make-a-function" class="section level1">
<h1>Make a function</h1>
<p>As an educator, you probably won’t be using packages much to create custom functions, but as a quick exercise to show that your package works and can be installed, let’s make one for fun.</p>
<p><strong>Write the function</strong> * <code>use_r(&quot;my-functions&quot;)</code>: Creates and opens a new .R script in the <code>R/</code> folder. Add your function here in this <code>.R</code> file. * Example:</p>
<pre class="r"><code>[insert example using glue() that prints something like &quot;welcome to first day of class&quot;]</code></pre>
<ul>
<li>Save</li>
</ul>
<div class="alert alert-note">
<blockquote>
<p><strong>A little more info:</strong> If you’d like to make multiple functions to go in a single package, you can add them all to the same .R script or you can create a new .R script for each one. It is up to you. [<strong>BUT IS IT ACTUALLY PREFERABLE TO KEEP THEM SEPARATE?</strong>]]</p>
</blockquote>
</div>
<p><strong>Document the function</strong>: Here is where <code>roxygen2</code> that we installed earlier comes into play. <code>roxygen2</code> will add specially-formatted comments before each function tht will be used for package documentation. Here’s what those comments looks like:</p>
<center>
<img src="sample.jpg" alt="screenshot of roxygen2 comments" />
</center>
<ul>
<li>[Click anywhere inside the function]</li>
<li><code>Code</code> &gt; <code>Insert Roxygen Skeleton</code></li>
<li>Add inline comments/ examples</li>
<li>Run <code>document()</code> which will “make concrete” your roxygen comments. The NAMESPACE file, and <code>man/</code> folders will have been updated.</li>
</ul>
<p>Community resources on function-writing: * <a href="https://hilaryparker.com/2014/04/29/writing-an-r-package-from-scratch/">Hilary Parker</a> *</p>
</div>
<div id="including-data-sets" class="section level1">
<h1>Including data sets</h1>
<p>What if you’d like your students to work with a specific data set. Should you email them an excel or .csv file? NO! You can include data sets in your package, ready to be summoned with the call of an object name.</p>
<p>[graphic for how to do this]</p>
<p>FYI: Folders that will be generated that you’ll be working with - <strong>Data:</strong> - <strong>Data-raw:</strong> This folder is where you can put all of your stuff. Scripts, csv files, whatever you want. - <strong>man:</strong> This folder will contain intermediate output. You won’t need to use the files in here directly, but they need to exist. - <strong>R</strong>: This is where your usable, callable data set will end up.</p>
<p><br> ### Step 1</p>
<pre class="r"><code>use_data_raw()</code></pre>
<p><br> ### Install</p>
<pre class="r"><code># install.packages(&quot;remotes&quot;)
remotes::install_github(&quot;your-github-name/your-repository-name&quot;)</code></pre>
<p><br></p>
<pre class="r"><code>summary(cars)</code></pre>
<p><br></p>
</div>
<div id="including-a-template-.rmd-file." class="section level1">
<h1>Including a template .Rmd file.</h1>
<p>What is an .Rmd template and why would you want to make one?</p>
<p>An .Rmd template is essentially the replacement for a worksheet. It is a partially-filled out .Rmd that you create. You can create a template for every hw assignment or exercise that you want your students to work through. And they can access all of these templates easily when they go to create a new .Rmd file. They just select the appropriate template.</p>
<p>To make one your first template, you will:</p>
<ol style="list-style-type: decimal">
<li>use a usethis function <code>use_rmarkdown_template()</code> to spit out the different files and folders you need all in the write places</li>
<li>You’ll modify the template.</li>
<li></li>
</ol>
<pre class="r"><code>use_rmarkdown_template(template_name = &quot;Template Name&quot;)</code></pre>
</div>
<div id="including-learnr-tutorials" class="section level1">
<h1>Including learnR tutorials</h1>
<p>**Folders added - This will add a inst folder to your package project directory</p>
<pre class="r"><code>remotes::install_github(&quot;rstudio/learnr&quot;)
use_tutorial(&quot;Lesson1&quot;, &quot;Lesson1&quot;, open = interactive())</code></pre>
<p>After running the code above, I got a really long wait time with something that said “Loading required package: shiny / Listening on <a href="http://127.0.0.1:5525" class="uri">http://127.0.0.1:5525</a>” After getting tired of waiting, I clicked “STOP” and the tutorial loaded. Weird.</p>
</div>
<div id="troubleshooting" class="section level1">
<h1>Troubleshooting</h1>
<p>If you run into rough patches, here are some common pitfalls that might be resulting in errors:</p>
<ul>
<li>Do you have most up-to-date version of your packages? Try installing the development version of the package from github. Here’s an example of what that looks like for the <code>usethis</code> package.</li>
</ul>
<pre class="r"><code># install.packages(&quot;devtools&quot;)
devtools::install_github(&quot;r-lib/usethis&quot;)</code></pre>
<ul>
<li><p>Are you running the most current version of R and/or RStudio?</p></li>
<li><p>Did you install R via homebrew? –&gt; Uninstall and install from CRAN!</p></li>
</ul>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
